#:kivy 1.8.0
#:import RiseInTransition kivy.uix.screenmanager.RiseInTransition

<SidePanel>:

    orientation: 'vertical'
    spacing: 1

    MenuItem:
        text: 'Search'

    MenuItem:
        text: 'Saved Searches'

    MenuItem:
        text: 'My Patents'

    MenuItem:
        text: 'Settings'

<AppActionBar>:
    pos_hint: {'top':1}
    ActionView:
        use_separator: True
        ActionMenu:

            #color: (0.8784313725490196, 0.4196078431372549, 0.14901960784313725,1)
            font_name: 'assets/JosefinSans-Regular.ttf'
            title: app.navbar_label
            with_previous: False
            app_icon: 'assets/side_menu_rectangles.png'
            #icon: 'tent_logo.png'
            on_press: self.menu()

<MainPanel>:
    usrnm: _usrnm
    psswrd: _psswrd
    orientation: 'vertical'
    spacing: 1

    ScreenManager:
        id: manager
        Screen:
            name: 'landing'
            FloatLayout:
                rows: 15
                canvas.before:

                    Color:
                        rgb: (0.00392156862745098,0.3568627450980392,0.49411764705882355)
                    Rectangle:
                        pos: self.pos
                        size: self.size

               # Image:
               #     source: 'assets/berk_back.png'
               #     allow_stretch: True
               #     pos_hint: { 'x': -.2, 'y': 0}
               #     size_hint: (1.3, 1.3)
                Image:
                    source: 'assets/fox_logo.png'
                    mipmap: True
                    pos_hint: {'x': .3, 'y': 0.6}
                    size_hint: (0.4, 0.4)
                    allow_stretch: True

                Label:
                    font_name: 'assets/CODE Bold.otf'
                    pos_hint: {'x': -.11, 'y': .12}
                    text: 'PATENT'
                    font_size: '40dp'

                Label:
                    font_name: 'assets/Roboto-Thin.ttf'
                    pos_hint: {'x': 0.16, 'y': 0.125}
                    text: 'FOX'
                    font_size: '30dp'

                Label:
                    font_name: 'assets/JosefinSans-Regular.ttf'
                    color: (0,0,0, 1)
                    pos_hint: {'x': 0, 'y': 0.16}
                    #text: 'Faster time to market.'
                    font_size: '15dp'

                Label:
                    pos_hint: {'x': 0, 'y': 0.03}
                    font_name: 'assets/JosefinSans-Regular.ttf'
                    text: app.login_text
                #Image:
                #    source: 'login_user.png'
                #    pos_hint: {'x': 0.11, 'y': 0.329} 
                #    size_hint: (0.11, 0.11)
                #    allow_stretch: True

                #Image:
                #    source: 'login_password.png'
                #    pos_hint: {'x': 0.11, 'y': 0.229} 
                #    size_hint: (0.11, 0.11)
                #    allow_stretch: True

                GridLayout:
                    pos_hint: {'x': 0.165, 'y': 0.4}
                    size_hint: (0.66, 0.07)
                    rows: 1
                    TextInput:
                        id: _usrnm
                        font_size: '25dp'
                        font_name: 'assets/Roboto-Thin.ttf'
                        background_normal: 'assets/sea_blue.png'
                        background_active: 'assets/sea_blue_light.png'
                        hint_text: 'Username'
                        hint_text_color: (0.09019607843137255, 0.6078431372549019, 0.8627450980392157, 1.0)

                GridLayout:
                    pos_hint: {'x': 0.165, 'y': 0.3}
                    size_hint: (0.66, 0.07)
                    rows: 1

                    TextInput:
                        id: _psswrd
                        font_size: '25dp'
                        font_name: 'assets/Roboto-Thin.ttf'
                        background_normal: 'assets/sea_blue.png'
                        background_active: 'assets/sea_blue_light.png'
                        hint_text: 'Password'
                        hint_text_color: (0.09019607843137255, 0.6078431372549019, 0.8627450980392157, 1.0)
                        password: True
     

                Button:
                    background_normal: 'assets/sea_blue.png'
                    size_hint: (.5, 0.05)
                    pos_hint: {'x': .25, 'y': 0.185}
                    font_name: 'assets/JosefinSans-Regular.ttf'
                    font_size: '15dp'
                    text: 'New? Create Account'
                    on_press: manager.transition = RiseInTransition()
                    on_press: app.manager = manager
                    on_press: app.signup( _usrnm.text, _psswrd.text)
                   # on_release: manager.current = 'analysis'

                Button:
                    background_color: (0.8784313725490196, 0.4196078431372549, 0.14901960784313725,1)
                    background_normal: ''
                    background_down:'assets/fox_orange_dark.png' 
                    size_hint: (1, 0.12)
                    pos_hint: {'x': 0, 'y': 0}
                    font_name: 'assets/Roboto-Thin.ttf'
                    font_size: '40dp'
                    text: 'Sign in'
                    on_press: app.login( _usrnm.text, _psswrd.text)
                    on_press: manager.transition = RiseInTransition()
                    on_press: app.manager = manager
                   # on_release: manager.current = 'analysis'
        Screen:
            name: 'analysis'
            FloatLayout:
                rows: 15
                canvas.before:

                    Color:
                        rgb: (0.00392156862745098,0.3568627450980392,0.49411764705882355)
                    Rectangle:
                        pos: self.pos
                        size: self.size

                AppActionBar:
                    size_hint: (1., 0.06)

                Label:
                    font_name: 'assets/timeburner_regular.ttf'
                    color: (0,0,0, 1)
                    pos_hint: {'x': 0, 'y': 0.23}
                    text: 'Step 1.'
                    font_size: '35dp'
                    bold: True

                GridLayout:
                    pos_hint: {'x': .25, 'y': 0.3}
                    size_hint_x: .5
                    size_hint_y: .3
                    rows:1
                    TextInput:
                        background_normal: ''
                        id: _searchTerm
                        hint_text: 'Brielfy describe your patent idea'
                        font_size: '11dp'

                Button:
                    background_color: (0.8784313725490196, 0.4196078431372549, 0.14901960784313725,1)
                    background_normal: ''
                    size_hint: (0.5, 0.1)
                    pos_hint: {'x': .25, 'y': 0.3}
                    text: 'Search'
                    font_size: '11dp'
                    on_release: app.search_term = app.query(_searchTerm.text)
                    on_release: manager.current = 'search_result'

        Screen:
            name: 'search_result'
            FloatLayout:
                rows: 15
                canvas.before:
                    Color:
                        rgb: (0.00392156862745098,0.3568627450980392,0.49411764705882355)
                    Rectangle:
                        pos: self.pos
                        size: self.size
                Carousel:
                    id: cad
                    fullscreen: True
                    loop: True

                    Label:
                        color:(0,0,0,1)
                        pos_hint: {'x': 0, 'y': .25}
                        markup: True
                        bold: True
                        #split_str: True
                        shorten: True
                        text: app.search0 + "\n\n\n\n\n\n\n\n\n\n\n\n\n\n" + "CONFIDENCE: \n" + app.s_confidence 
                        font_size: '10dp'

                    Label:
                        color: (0,0,0,1)
                        pos_hint: {'x': 0, 'y': .25}
                        markup: True
                        bold: True
                        #split_str: True
                        text: app.search1 + "\n\n\n\n\n\n\n\n\n\n\n\n\n\n" + "CONFIDENCE: \n" + app.s1_confidence 
                        font_size: '10dp'

                    Label:
                        color: (0,0,0,1)
                        pos_hint: {'x': 0, 'y': .25}
                        markup: True
                        bold: True
                        #split_str: True
                        text: app.search2 + "\n\n\n\n\n\n\n\n\n\n\n\n\n\n" + "CONFIDENCE: \n" + app.s2_confidence 
                        font_size: '10dp'


                Button:
                    background_color:  (0.058823529, 0.458823529, 0.741176471, 1)
                    background_normal: ''
                    size_hint: (1, 0.05)
                    pos_hint: {'x': 0, 'y': 0}
                    text: 'Continue '
                    on_release: manager.current = 'analysis'

        Screen:
            name: 'saved_searches'
            FloatLayout:
                rows: 15
                canvas.before:
                    Color:
                        rgb: (0.952941176,0.949019608,0.933333333)
                    Rectangle:
                        pos: self.pos
                        size: self.size

                Label:
                    font_name: 'assets/timeburner_regular.ttf'
                    color: (0,0,0, 1)
                    pos_hint: {'x': 0, 'y': 0.23}
                    text: 'Saved Searches'
                    font_size: '35dp'
                    bold: True

        Screen:
            name: 'search_history'
            FloatLayout:
                rows: 15
                canvas.before:
                    Color:
                        rgb: (0.952941176,0.949019608,0.933333333)
                    Rectangle:
                        pos: self.pos
                        size: self.size

                Label:
                    font_name: 'assets/timeburner_regular.ttf'
                    color: (0,0,0, 1)
                    pos_hint: {'x': 0, 'y': 0.23}
                    text: 'My Patents'
                    font_size: '35dp'
                    bold: True

                Button:
                    background_color:  (0.364705882,0.637254902,0.823529412,1)
                    background_normal: ''
                    size_hint: (0.5, 0.1)
                    pos_hint: {'x': .25, 'y': 0.3}
                    text: 'Saved Searches'
                    font_size: '11dp'
                    on_release: 

        Screen:
            name: 'settings'
            FloatLayout:
                rows: 15
                canvas.before:
                    Color:
                        rgb: (0.952941176,0.949019608,0.933333333)
                    Rectangle:
                        pos: self.pos
                        size: self.size

                Label:
                    font_name: 'assets/timeburner_regular.ttf'
                    color: (0,0,0, 1)
                    pos_hint: {'x': 0, 'y': 0.23}
                    text: 'Settings'
                    font_size: '35dp'
                    bold: True

